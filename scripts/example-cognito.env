# Example environment file for AWS Cognito-based OIDC S3 Uploader
# Copy this to config.env and fill in the values from Terraform outputs
#
# Scripts:
#   oidc_credential_provider.py - Handles OIDC authentication and AWS credentials
#   s3_ops.py - S3 operations (upload, download, list, delete)

# Identity Provider Type
export IDP_TYPE=cognito

# Cognito Configuration (from terraform output server_configurations)
export COGNITO_DOMAIN=oidc-s3-dev-123456789012
export COGNITO_CLIENT_ID=your-client-id-here
export COGNITO_CLIENT_SECRET=your-client-secret-here
export COGNITO_RESOURCE_SERVER=https://s3-uploader.dev.oidc-s3
export COGNITO_CREDENTIAL_API_URL=https://xxx.execute-api.eu-west-1.amazonaws.com/credentials

# AWS Configuration
export AWS_REGION=eu-west-1

# S3 Configuration
export S3_BUCKET=oidc-s3-dev-uploads
export S3_PATH_PREFIX=logs/server-01/

# For log shippers (Vector, Fluent Bit, etc.), use credential_process:
# 1. Create AWS config file (/etc/oidc-s3/aws-config):
#    [profile oidc-s3]
#    credential_process = /bin/bash -c 'source /etc/oidc-s3/config.env && python3 /opt/oidc-s3/oidc_credential_provider.py get-credentials'
#    region = eu-west-1
#
# 2. Set these in your environment:
# export AWS_CONFIG_FILE=/etc/oidc-s3/aws-config
# export AWS_PROFILE=oidc-s3
