# OIDC S3 Uploader Configuration
# Copy this file and source it before running the scripts
#
# Scripts:
#   oidc_credential_provider.py - Handles OIDC authentication and AWS credentials
#   s3_ops.py - S3 operations (upload, download, list, delete)

# =============================================================================
# Identity Provider Selection
# =============================================================================
# Choose one: "auth0" or "cognito"
export IDP_TYPE=auth0

# =============================================================================
# Auth0 Configuration (if IDP_TYPE=auth0)
# =============================================================================
export AUTH0_DOMAIN=your-tenant.auth0.com
export AUTH0_CLIENT_ID=xxx
export AUTH0_CLIENT_SECRET=xxx
export AUTH0_AUDIENCE=https://s3-uploader.dev.example.com
export AWS_ROLE_ARN=arn:aws:iam::123456789012:role/oidc-s3-dev-server-name

# =============================================================================
# Cognito Configuration (if IDP_TYPE=cognito)
# =============================================================================
# export COGNITO_DOMAIN=oidc-s3-dev-123456789012
# export COGNITO_CLIENT_ID=xxx
# export COGNITO_CLIENT_SECRET=xxx
# export COGNITO_RESOURCE_SERVER=https://s3-uploader.dev.oidc-s3
# export COGNITO_CREDENTIAL_API_URL=https://xxx.execute-api.eu-west-1.amazonaws.com/credentials

# =============================================================================
# AWS Configuration
# =============================================================================
export AWS_REGION=eu-west-1

# For credential_process integration (recommended for log shippers):
# Create an AWS config file with:
#   [profile oidc-s3]
#   credential_process = /bin/bash -c 'source /path/to/config.env && python3 /path/to/oidc_credential_provider.py get-credentials'
#   region = eu-west-1
#
# Then set:
# export AWS_CONFIG_FILE=/path/to/aws-config
# export AWS_PROFILE=oidc-s3

# =============================================================================
# S3 Configuration
# =============================================================================
export S3_BUCKET=oidc-s3-dev-uploads
export S3_PATH_PREFIX=logs/server-01/
